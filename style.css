/* ================= Base / Reset ================= */
/* Keep it simple: one global reset and app font */
*{ margin:0; padding:0; box-sizing:border-box; font-family:"poppins",sans-serif; }

body{
  background-color:#8b0000;
  background:linear-gradient(to right,#eba7a7,#fa6868);
}


/* ================= Generic (legacy auth pages) ================= */
.container{
  background:#fff; width:450px; padding:1.5rem; margin:50px auto;
  border-radius:10px; box-shadow:0 20px 35px rgba(0,0,1,0.9);
}

form{ margin:0 2rem; }
.form-title{ font-size:1.5rem; font-weight:bold; text-align:center; padding:1.3rem; margin-bottom:0.4rem; }

input{
  color:inherit; width:100%; background:transparent; border:none; border-bottom:1px solid #757575;
  padding-left:1.5rem; font-size:15px;
}
.input-group{ padding:1% 0; position:relative; }
.input-group i{ position:absolute; color:black; }
input:focus{ background:transparent; outline:transparent; border-bottom:2px solid hsl(327,90%,28%); }
input::placeholder{ color:transparent; }

label{
  color:#757575; position:relative; left:1.2em; top:-1.3em; cursor:auto; transition:0.3s ease;
}
input:focus~label,
input:not(:placeholder-shown)~label{
  top:-3em; color:hsl(327,90%,28%); font-size:15px;
}

.recover{ text-align:right; font-size:1rem; margin-bottom:1rem; }
.recover a{ text-decoration:none; color:#8b0000; }
.recover a:hover{ color:#8b0000; text-decoration:underline; }

.btn{
  font-size:1.1rem; padding:8px 0; border-radius:5px; outline:none; border:none;
  width:100%; background:#8b0000; color:#fff; cursor:pointer; transition:0.2s;
  text-decoration:none; display:inline-block;
}
.btn:hover{ background:#07001f; }
.btn--sm{ width:auto; font-size:.92rem; padding:6px 10px; border-radius:8px; }
.btn--light{ background:#fff; color:#111; border:1px solid #ddd; }
.btn--light:hover{ background:#f2f2f2; }
.btn[disabled]{ opacity:.5; cursor:not-allowed; pointer-events:none; }

.or{ font-size:1.1rem; margin-top:0.5rem; text-align:center; }
.icons{ text-align:center; }
.icons i{
  color:#8b0000; border-radius:10px; font-size:1.5rem; cursor:pointer;
  border:2px solid #dfe9f5; margin:0 15px; transition:0.2s;
  display:inline-flex; width:56px; height:56px; justify-content:center; align-items:center; padding:0;
}
.icons i:hover{ background:#07001f; font-size:1.6rem; border:2px solid #8b0000; }

.links{ display:flex; justify-content:space-around; padding:0 4rem; margin-top:0.9rem; font-weight:bold; }
button{ color:#8b0000; border:none; background:transparent; font-size:1rem; font-weight:bold; }
button:hover{ text-decoration:underline; color:#8b0000; }
.toggle-password{ position:absolute; right:10px; top:0; transform:translateY(0); cursor:pointer; color:#555; font-size:1rem; z-index:2; }

select:required:invalid{ color:#757575; }
select option[value=""]{ color:#757575; }
select:valid{ color:inherit; }
select#role{ margin-bottom:1rem; }
select{
  color:inherit; width:100%; background:transparent; border:none; border-bottom:1px solid #757575;
  padding-left:1.5rem; font-size:15px; font-family:inherit; appearance:none;
}
select:focus{ outline:transparent; border-bottom:2px solid hsl(327,90%,28%); background:transparent; }

.alert{ margin:0.5rem 2rem; padding:0.75rem 1rem; border-radius:6px; font-size:0.95rem; line-height:1.4; }
.alert.success{ background:#e6ffed; border:1px solid #b7f5c3; color:#165b31; }
.alert.danger{  background:#ffecec; border:1px solid #f5b7b7; color:#7d1a1a; }
.alert.info{    background:#eef5ff; border:1px solid #bdd1ff; color:#1a3a7d; }


/* ================= App Headers / Navigation ================= */
.admin-header, .parent-header, .teacher-header{
  max-width:960px; margin:28px auto 8px; padding:0 16px;
  gap:12px; display:flex; align-items:center; justify-content:center; flex-direction:column; text-align:center;
}
.admin-title, .parent-title, .teacher-title{ margin:0 0 .25rem; }

.admin-nav, .parent-nav, .teacher-nav{ display:flex; flex-wrap:wrap; justify-content:center; gap:12px; }
.admin-link, .parent-link, .teacher-link{
  display:inline-block; padding:8px 12px; border-radius:10px; text-decoration:none;
  background:#ffffffcc; color:#111; box-shadow:0 2px 8px rgba(0,0,0,.12);
}
.admin-link:hover, .parent-link:hover, .teacher-link:hover{ opacity:.9; }
.admin-link.active, .parent-link.active, .teacher-link.active{ background:#111; color:#fff; }
.logout{ color:#a00; }

/* Home cards grid */
.admin-home, .parent-home, .teacher-home{
  max-width:960px; margin:32px auto; padding:0 16px;
  display:grid; grid-template-columns:repeat(auto-fill, minmax(260px,1fr));
  gap:20px; justify-content:center; text-align:center;
}
.home-card{
  display:block; background:#fff; border-radius:14px; padding:24px 22px;
  box-shadow:0 10px 30px rgba(0,0,0,.12); text-decoration:none; color:inherit;
  transition:transform .12s ease, box-shadow .12s ease;
}
.home-card:hover{ transform:translateY(-2px); box-shadow:0 14px 34px rgba(0,0,0,.16); }
.home-icon{ font-size:32px; }
.home-title{ margin-top:8px; font-weight:700; font-size:18px; }
.home-sub{ margin-top:4px; color:#666; font-size:13px; }

/* Common helpers */
.muted{ opacity:.75; font-size:.9em; }
.row-between{ display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap; }
.card{ background:#fff; border:1px solid #eee; border-radius:.75rem; padding:1rem; margin:1rem 0; }


/* ================= Responsive widths ================= */
@media (min-width:1400px){
  .admin-header, .parent-header, .teacher-header,
  .admin-home, .parent-home, .teacher-home{ max-width:1040px; }
}
@media (max-width:640px){
  .admin-header, .parent-header, .teacher-header,
  .admin-home, .parent-home, .teacher-home{ padding-left:16px; padding-right:16px; }
}


/* ================= Print ================= */
@page{ margin:12mm; }
@media print{
  .teacher-header, .teacher-nav, .actions, .btn, .alert{ display:none!important; }
  body{ background:#fff!important; -webkit-print-color-adjust:exact; print-color-adjust:exact; }
  .card{ box-shadow:none!important; border:none!important; background:#fff!important; padding:0!important; margin:0!important; }
  .table-wrap{ padding:0!important; overflow:visible!important; }
  .table thead{ display:table-header-group; }
  .table tr{ page-break-inside:avoid; }
  .print-brand{
    display:block!important; position:fixed; top:6mm; right:6mm; left:auto;
    text-align:right; font-weight:600; font-size:12pt; background:transparent; padding:0; border:0; z-index:9999;
  }
  .print-sheet{ margin-top:18mm!important; }
}


/* ================= Details (used in import tips) ================= */
details{ font:16px "Open Sans", Calibri, sans-serif; width:620px; }
details > summary{ padding:2px 6px; width:15em; background:#ddd; border:none; box-shadow:3px 3px 4px black; cursor:pointer; }
details:open > summary{ background:#ccf; }


/* ================= Main content width ================= */
.admin-main, .teacher-main, .parent-main{
  max-width:1400px; margin:20px auto 36px; padding:0 16px;
}


/* ================= Tables ================= */
.table-wrap{ overflow:auto; }
.table{ width:100%; border-collapse:collapse; }
.table th, .table td{ border-top:1px solid #eee; padding:.6rem .5rem; text-align:left; }

.table thead th{
  position:sticky; top:0; background:#fff; box-shadow:0 1px 0 #eee; z-index:2;
}
.table tbody tr:nth-child(even) td{ background:#fafafa; }

.table-wrap.is-scroll{
  max-height:70vh; border:1px solid #eee; border-radius:8px; overflow:auto;
}

.table .cell-input{
  width:100%; padding:.28rem .4rem; border:1px solid #ddd; border-radius:6px; font-size:14px; background:#fff;
}
tr.row-new td, tr.row-edit td{ background:#fff7e6; }
td.actions{ white-space:nowrap; }


/* ================= Courses Card ================= */
#course_card.card{
  background:#fff; border:1px solid #eee; border-radius:12px;
  padding:16px; box-shadow:0 10px 30px rgba(0,0,0,.08); margin:16px 0;
}

/* 上一学年只读模式：弱化卡片背景，避免用户误以为可编辑 */
#course_card.is-readonly{
  background: #faf7ff;
  border-color: #e8e1ff;
}

/* 只读提示小胶囊 */
.view-only-note{
  display:inline-block; margin-left:8px; padding:2px 6px; font-size:12px;
  border-radius:999px; background:#efeaff; color:#5a43ad; border:1px solid #dcd3ff;
  vertical-align:middle;
}


/* ================= Dropdown (Plan Next) ================= */
.menu .menu-item{ font-size:14px; }
.menu .menu-item.is-disabled,
.menu .menu-item[aria-disabled="true"],
.menu .menu-item:disabled{
  opacity:.45; cursor:not-allowed !important; pointer-events:none;
}
.menu .menu-item .muted{ color:#666; }


/* ================= Teachers table tweaks ================= */
.table--teachers .col-actions{ width:260px; }
#teacher_card td.actions{ white-space:normal; }

.inline-checkbox{ display:inline-flex; align-items:center; gap:6px; margin-right:8px; font-size:12px; color:#444; }
.action-stack{ display:flex; flex-direction:column; gap:6px; }
.action-row{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }


/* ================= Modal ================= */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  padding:16px; background:rgba(0,0,0,.45); z-index:9999;
}
.modal.is-open{ display:flex; }
.modal__dialog{
  width:min(860px,96vw); max-height:90vh; background:#fff;
  border-radius:12px; box-shadow:0 18px 60px rgba(0,0,0,.25); overflow:hidden;
}
.modal__header{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; border-bottom:1px solid #eee;
}
.modal__header h4{ margin:0; }
.modal__close{ appearance:none; border:0; background:#eee; border-radius:8px; width:32px; height:32px; font-size:18px; cursor:pointer; }
.modal__header .modal__close{
  width:auto; height:auto; padding:6px 10px; font-size:14px; background:#fff; border:1px solid #ddd; border-radius:8px; cursor:pointer;
}
.modal__body{ padding:14px 16px; overflow:auto; }

.import-step{ display:flex; align-items:center; gap:10px; margin:8px 0 12px; }
.stepper{ display:flex; gap:8px; list-style:none; padding:0; margin:0 0 10px; }
.stepper li{ padding:4px 8px; border-radius:6px; border:1px solid #eee; background:#fafafa; font-size:13px; }
.stepper li.active{ border-color:#333; background:#f0f3ff; }

.modal label{ position:static; display:block; margin:0 0 6px; color:#333; }
.modal input[type="text"],
.modal input[type="number"],
.modal select{
  width:100%; background:#fff; border:1px solid #ddd; border-radius:8px;
  padding:8px 10px; font-size:14px; box-sizing:border-box;
}
.modal .btn{ width:auto; }
.modal .form-row{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin:10px 0 12px; }
.modal .grow{ flex:1 1 260px; }
.modal .table-wrap{ max-height:48vh; }


/* ================= Terms → Year Range (scoped) ================= */
.year-range-form{
  display:grid !important;
  grid-template-columns:minmax(260px,1fr) minmax(260px,1fr) auto;
  column-gap:16px; row-gap:8px; align-items:center;
  margin-top:12px !important;
}

.year-range-form .form-field{
  display:grid !important;
  grid-template-columns:max-content auto;
  align-items:center; column-gap:8px; min-width:0;
}

.year-range-form label{
  position:static !important; left:auto; top:auto;
  margin:0; white-space:nowrap; font-size:13px; line-height:1; color:#9a1a36;
}

.year-range-form .cell-input[type="date"]{
  width:auto !important; min-width:170px; height:34px;
  padding:4px 8px; box-sizing:border-box;
}

@media (max-width:640px){
  .year-range-form{ grid-template-columns:1fr; row-gap:10px; }
  .year-range-form button{ justify-self:start; }
}
